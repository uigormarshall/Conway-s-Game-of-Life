var a=Object.defineProperty;var m=(l,e,o)=>e in l?a(l,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):l[e]=o;var i=(l,e,o)=>(m(l,typeof e!="symbol"?e+"":e,o),o);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function o(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(t){if(t.ep)return;t.ep=!0;const n=o(t);fetch(t.href,n)}})();class h{constructor(e,o,r=!1,t){i(this,"rows",0);i(this,"columns",0);i(this,"matrix");i(this,"rule");console.log("Inicializando Matriz"),this.rows=e,this.columns=o,this.matrix=this.generateEmptyMatrix(e,o),this.rule=t,r&&this.randomizeLiveCells()}generateEmptyMatrix(e,o){let r=[];for(let t=0;t<e;t++){let n=[];r.push(n);for(let s=0;s<o;s++){let u={id:`${t}-${s}`,row:t,column:s,isLive:!1,neighbors:0,checker:""};n.push(u)}}return r}randomizeLiveCells(){for(let e=0;e<this.rows;e++)for(let o=0;o<this.columns;o++){const r=this.rule.getRandomNumber();r==1&&(this.matrix[e][o].isLive=r,this.matrix[e][o].neighbors=this.countNeighbors(this.matrix[e][o],this.matrix))}}updateNeighbors(e){for(let o=0;o<this.rows;o++)for(let r=0;r<this.columns;r++){const t=e[o][r];t.neighbors=this.countNeighbors(t,e),this.matrix[o][r].neighbors=t.neighbors}}countNeighbors(e,o){let r=o,t=0;return[{name:"norte[N]",row:e.row-1,column:e.column},{name:"Sul[S]",row:e.row+1,column:e.column},{name:"Oeste[O]",row:e.row,column:e.column-1},{name:"Este[E]",row:e.row,column:e.column+1},{name:"Noroeste[NO]",row:e.row-1,column:e.column-1},{name:"Nordeste[NE]",row:e.row-1,column:e.column+1},{name:"Sudoeste[SO]",row:e.row+1,column:e.column-1},{name:"Sudeste[SE]",row:e.row+1,column:e.column+1}].forEach(s=>{s.row>=0&&s.row<this.rows&&s.column>=0&&s.column<this.columns&&(e=r[s.row][s.column],e!==void 0?e.isLive==1&&t++:console.log("Cell not found"))}),t}nextGen(){let e=this.matrix;for(let o=0;o<this.rows;o++)for(let r=0;r<this.columns;r++){let t=e[o][r];t.neighbors=this.matrix[o][r].neighbors;const n=this.matrix[o][r];this.rule.apply(n)}return this.updateNeighbors(e),e}born(e,o){this.matrix[e][o].isLive=1,this.updateNeighbors(this.matrix)}}class d{constructor(e,o,r,t){i(this,"matrix");i(this,"rule");console.log("Iniciando Render"),this.rule=t,this.matrix=new h(e,o,r,this.rule),this.generateCells(this.matrix.matrix)}generateCells(e){let o=document.getElementById("matrix");for(let r=0;r<e.length;r++){let t=document.createElement("tr");for(let n=0;n<e[r].length;n++){const s=document.createElement("td"),c=`${e[r][n].id}`;s.id=c,s.style.backgroundColor="#0a050f",t.appendChild(s)}o.appendChild(t)}document.body.appendChild(o)}nextGen(){const e=this.matrix.nextGen(),o=e.length,r=e[0].length;for(let t=0;t<o;t++)for(let n=0;n<r;n++){const s=`${t}-${n}`;let c=document.getElementById(s);c&&(e[t][n].isLive==1?c.style.backgroundColor="#cc4f43":c.style.backgroundColor="#0a050f")}}born(e,o){this.matrix.born(e,o);const r=`${e}-${o}`;let t=document.getElementById(r);t!=null&&(t.style.backgroundColor="#cc4f43")}}class f{constructor(e,o,r){i(this,"name","");i(this,"fps",5);i(this,"rule");this.name=e,this.fps=o,this.rule=r}run(){const t=new d(90,35,!0,this.rule);setInterval(t.nextGen.bind(t),1e3/this.fps)}}class g{constructor(){i(this,"name","Maze")}apply(e){console.log(this.name+": Aplicando Rules"),e.isLive?(e.neighbors<1||e.neighbors>5)&&(e.isLive=0):e.neighbors===3&&(e.isLive=1)}getRandomNumber(){return Math.floor(Math.random()*9)}}const w=new g,p=new f("game of life",10,w);p.run();
